{% include 'ui/headz.html' %}
<style>
body { background-color: #f8c91b; }

.title { color: #fafafa; padding-bottom: 1rem; text-shadow: 1px 1px 15px #fafafa; text-align: center;}
.supertitle { color: #fafafa; text-align: center; font-size: 6em; line-height: 7rem; padding-top: 2rem; text-shadow: 1px 1px 15px #fafafa; }
.supertitle span { padding-top: 2rem;font-size: 3rem; color: #83ab4d; xopacity: 0.5; line-height: 3rem; display: inline-block; }
.supertitle a { padding-top: 2rem;font-size: 3rem; color: #83ab4d; xopacity: 0.5; line-height: 3rem; display: inline-block; text-shadow: 1px 1px 15px #fafafa; }
.container-snapshot { position: relative; clear: both; z-index: 3; margin: auto; width: 90%; }
@media (max-width: 768px) {
	.container-snapshot { width: 80%; xborder: 2px solid red;}
	.supertitle { font-size: 3rem; line-height: 4rem; padding-top: 0; }
	.supertitle span { font-size: 2rem; line-height: 2rem; }
	.supertitle a { font-size: 2rem; line-height: 2rem; }
}


.snapshot { position: relative; xwidth: 45%; xheight: 360px; padding: 0; xmargin: 1rem; }
.snapshot-legend { position: absolute; bottom: 0rem; left: 0rem; font-size: 2rem; xfont-weight: bold;
	background-color: #83ab4d; color: #fff; xwidth: 100%; padding-left: 10px; padding-right: 10px; xopacity: 0.7; }
.snapshot-img { position: relative; text-align: center; }
.snapshot-img img { border: 1px solid #fafafa; padding: 0; margin: 0; opacity: 1; }
.snapshot-action { position: absolute; bottom: 1rem; right: 1rem; visibility: hidden; }
.snapshot-action a { font-size: 2rem; background-color: #83ab4d; color: white;
 border-radius: 50px; padding: 10px; box-shadow: 2px 2px 2px #fafafa;}

.snapshot-polaroid {
padding: 10px 10px 5px 10px;
 border: 1px solid #BFBFBF;
 background-color: #fafafa;
 box-shadow: 10px 10px 5px #f8c91b;
 }

.display-fullscreen {
 width: 100vw;
 height: 100vh;
 xborder: 5px solid red;
 position: fixed;
 top: 0;
 left: 0;
 z-index: 100;
 background-color: #fff;
 visibility: hidden;
 justify-content: center;
 align-items: center;
 cursor: pointer;
 display: flex;
 flex-direction: row;
}
.display-fullscreen .content-visual { visibility: inherit; width: 60%; height: 100%; background-size: auto 100%; background-repeat: no-repeat; }
.display-fullscreen .content-txt { background-color: #f8c91b; #2B3B8E; visibility: inherit; width: 40%; height: 100%; }
.display-fullscreen .content-txt .data {  visibility: inherit; }
.display-fullscreen .content-txt .txt { padding-left: 2rem; padding-top: 2rem; font-size: 1.2rem; color: #000;  }
.display-fullscreen .content-txt .txt em { font-size: 1rem; line-height: 1.3rem; display: inline-block; opacity: 0.5; padding-top: .5rem; }
.display-fullscreen .content-txt .legend { padding: 1rem; font-size: 2rem; color: #000;
	line-height: 2.5rem; visibility: inherit; display: flex; flex-direction: row; align-items: flex-start; }
.display-fullscreen .content-txt .legend div  { background-color: #f8c91b; color: #fff; padding: 0.5rem 1rem;box-shadow: 1px 1px 15px #fafafa; }
.display-fullscreen .content-txt .legend span:nth-child(2)  { background-color: #83ab4d; #0924AB; color: #fff; padding: 0.5rem 1rem; }
.display-fullscreen .content-txt .legend span:nth-child(4)  { color: #fff; font-weight: bold; padding: 0.5rem 1rem; }

.display-fullscreen .content-txt .close { padding-left: 1em; padding-top: 1rem; visibility: inherit;
	display: flex; flex-direction: row; align-items: center; line-height: 1.3rem;
 color: #fff; }
.display-fullscreen .content-txt .close a { font-size: 2rem;  color: #fff;
 border-radius: 50%; padding: 5px; box-shadow: 2px 2px 2px #83ab4d; margin-right: 1rem;
display: inline-block; width: 3rem; text-align: center; opacity: 0.5; background-color: #83ab4d;
	}


	.menu {  background-color: #fafafa;  top: 0; left: 0; width: 100%; display: flex; flex-direction: row; align-items: center; justify-content: flex-start; }
.menuinfo { padding: 0.5rem;  color: #000;  padding-left: 2rem; flex-grow: 1; line-height: 1.3rem; }
.is-my { font-weight: bold;box-shadow: 1px 1px 15px #83ab4d;  background-color: #83ab4d !important; color: #fff; xpadding: 2rem; padding: 1rem; font-size: 1rem; width: 100%;}

@media (max-width: 768px) {
.menu { flex-direction: column; }
.menuinfo { margin-top: 1rem; padding-left: 1rem;}
}

</style>




{% include 'ui/headzen.html' %}


<div class="menu">
	<div class="dropdown is-hoverable">
	  <div class="dropdown-trigger">
	    <a href=# class="xbutton is-my " aria-haspopup="true" aria-controls="dropdown-menu4">
	      <span>{{ classemini }}</span>
	      <span class="icon is-small">
	        <i class="fas fa-angle-down" aria-hidden="true"></i>
	      </span>
	    </a>
	  </div>
	  <div class="dropdown-menu" id="dropdown-menu4" role="menu">
	    <div class="dropdown-content">
				<a href="classe-ms-audio.html" class="dropdown-item">
					Classe de Justine Grandjean (MS)
				</a>
				<a href="classe-msgs-audio.html" class="dropdown-item">
					Classe de Rachelle Cadot (MS-GS)
				</a>
				<a href="classe-gs-audio.html" class="dropdown-item">
					Classe de Natascha Beraud (GS)
				</a>

				<hr class="dropdown-divider">
	      <a href="mailto:parleweb@gmail.com?subject=Emotion_2018" class="dropdown-item">
	        Contactez Parle Web
	      </a>
	    </div>
	  </div>
	</div>
	<div class="menuinfo">
		{{ classe|safe }}
	</div>
</div>


<div class="hero">
	<div class="hero-body">
		<div class="supertitle">
			{{ title|safe }}
		</div>

	</div>
</div>

<div class="display-fullscreen">

	<div class="content-txt">
	 	<div class="data"></div>
	  <div class="legend"></div>
		<div class="txt">
			{{ content|safe }}
		</div>
	  <div class="close"><a href="#"><i class="fas fa-arrow-left"></i></a>{# {{ classe|safe }} #}</div>
	</div>

	<div class="content-visual">
	</div>

</div>

{% if zenimg is not defined %}
Parle Data information :<br />
Erreur de Configuration - Contexte des données <br />
<br />ZENIMG Manquant
{% endif %}

{% if zenimg is not defined %}
Parle Data information :<br />
Erreur de Configuration - Contexte des données <br />
<br />AUDIODIR Manquant
{% endif %}

{% if zencsv is defined %}
<div class="container-snapshot">
  <div class="columns is-gapless">
			<div class="column">


			{% set countercol = ['1'] %}

			{% for mydata in zencsv %}

				{# CLOSE PREVIOUS DIV COLUMN AND OPEN NEW ONE #}
				{% if loop.index > (countercol|length)*(loop.length/4) %}
					{% if countercol.append('1') %}{% endif %}
					</div>
					<div class="column">
				{% endif %}

				{# SNAPSHOT #}
				 <div class="snapshot snapshot-polaroid" id="snapshot{{ mydata.num }}" data-action="audio" data-value="{{ mydata.audio }}" data-background="{{ mydata.img }}" data-legend="{{ mydata.prenom }}" data-bgposition="{{ mydata.bgposition}}">

				    <div class="snapshot-img">

							{%if zenimg[mydata.img] is defined %}
							<img src="{{ profile.staticurl }}{{ zenimg.folder }}/{{ zenimg[mydata.img].th }}" width="{{ zenimg[mydata.img].thw }}" height="{{ zenimg[mydata.img].thh }}" class="img-fluid" />
							{% endif %}

							{#<img src="p1050420.jpg" class="img-fluid">#}
						</div>
		        <div class="snapshot-legend">{{ mydata.prenom }}{# {{ mydata.nom }} - {{ mydata.naissance }} #}</div>
		        <div class="snapshot-action"><a href="#"><i class="fas fa-volume-up"></i></a></div>
		     	</div>

			 {% endfor %}

		</div>
	</div>
</div>
{% else %}
Parle Data information :<br />
Erreur de Configuration - Contexte des données <br />
<br />ZENCSV manquant
{% endif %}
<div class="supertitle">
	<a href="contact.html">laissez-nous un petit mot</a>
</div>

<div class="hero">
	<div class="hero-body">

		<div class="subtitle">
			{{ equipe|safe }}
		</div>
		<div class="usage">

			{{ usage }}
		</div>

	</div>
</div>

{% include 'ui/footz.html' %}
{% if debug is defined %}
{% include 'ui/js-debug.html' %}
{% endif %}

<script>

$( ".snapshot" )
.mouseenter(function() {
	$( this ).css( { "transform": "scale(1.3)", "z-index": "200" } );
	$( this ).find( "img" ).css( { "opacity": "0.5", "cursor": "pointer" } );

	$( this ).find( ".snapshot-action" ).css( "visibility", "visible" );
})
.mouseleave(function() {
	$( this ).css( { "transform": "scale(1)", "z-index": "auto" } );
	$( this ).find( "img" ).css( { "opacity": "1", "cursor": "auto" } );

	$( this ).find( ".snapshot-action" ).css( "visibility", "hidden" );
})
.click(function() {
	action = $( this ).attr( "data-action" );
	value = $( this ).attr( "data-value" );
	$( this ).css( "background-color", "#f8c91b" );
	$( this ).find(".snapshot-legend").css( "background-color", "#f8c91b" );

	if( action == 'audio' )
	{
		dir_bg = "{{ profile.staticurl }}{{ zenimg.folder }}/"
		dir_audio = "{{ profile.staticurl }}{{ audiodir }}/"


		value_bg = $( this ).attr( "data-background" );
		value_bgposition = $( this ).attr( "data-bgposition" );
		if( value_bgposition == 'None' || value_bgposition == '' )
			value_bgposition = "top center"
		value_legend = $( this ).attr( "data-legend" );
		html_legend = "<div>"+value_legend+" dit son poème</div>";

		html = "<audio src='"+dir_audio+value+"' autoplay volume='1.0' >Votre navigateur ne supporte pas l'élément <code>audio</code>.</audio>";


		console.log(value_bgposition);
		bgurl = "url('"+dir_bg+value_bg+".jpg')";
		$( ".display-fullscreen .content-visual" ).css( "background-image", bgurl );
		$( ".display-fullscreen .content-visual" ).css( "background-position", value_bgposition );
		$( ".display-fullscreen .content-txt .legend" ).html( html_legend );
		$( ".display-fullscreen .content-txt .data" ).html( html );

		$( ".display-fullscreen" ).css( "visibility", "visible" );




	}
	else if( action == 'video' )
	{
		value_legend = $( this ).attr( "data-legend" );
		html_legend = "<strong>"+value_legend+"</strong> dansent les émotions</strong>";

		html = "<iframe id='ytplayer' type='text/html' width='900px' height='600px' src='https://www.youtube.com/embed/"+value+"?autoplay=1&controls=0&rel=0&showinfo=0' frameborder='0' allowfullscreen>";

		 $( ".display-fullscreen .content-txt .legend" ).html( html_legend );
		$( ".display-fullscreen .content-txt .data" ).html( html );

		$( ".display-fullscreen .content-visual" ).css( "background", "none" );
		$( ".display-fullscreen .content-visual" ).css( "background-color", "#000" );
		$( ".display-fullscreen" ).css( "display", "visible" );
	}
	else alert('no action defined');
});

$( ".display-fullscreen" )
.click(function() {
	$( this ).css( "visibility", "hidden" );
	$( this ).find( ".content-txt .data" ).html( "" );
});

$( ".display-fullscreen .content-txt .close" )
.click(function() {
	$( ".display-fullscreen" ).css( "visibility", "hidden" );
	$( ".display-fullscreen .content-txt .data" ).html( "" );
	return false;

});
</script>


{% include 'ui/footzen.html' %}
